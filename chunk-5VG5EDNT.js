import{a as be}from"./chunk-B6GHM2N4.js";import{a as ye}from"./chunk-QUF2MSQX.js";import{a as x}from"./chunk-QFI5ZUMR.js";import{B as _e,r as P,v as ve}from"./chunk-JEBJIWP7.js";import{B as D,E as he,F as Ce,d as v,e as ae,f as se,g as le,h as ce,i as _,j as y,k as me,l as de,m as b,n as k,o as S,p as ue,q as pe,r as fe,s as ge,t as M,x as T,z as I}from"./chunk-WBYHU4V7.js";import{$ as A,Ba as O,Ca as E,Da as V,Ea as W,F as H,G as z,P as c,Pa as X,Q as s,S as g,Ua as Y,Va as K,W as B,Wa as Z,Xa as Q,_ as p,aa as L,ba as U,ca as i,da as r,ea as u,eb as C,ia as G,ja as d,jb as q,k as j,ka as w,lb as ee,mb as te,na as J,nb as R,ob as N,qb as oe,sb as ie,ta as m,tb as ne,ua as h,va as $,yb as re}from"./chunk-TPGHJTJC.js";import"./chunk-SRKNPOHE.js";import"./chunk-7KGURMOZ.js";import"./chunk-BLW5R4XS.js";import"./chunk-XPWJSSAW.js";import"./chunk-WNRD3PDI.js";import"./chunk-QQJWOYZO.js";import"./chunk-MHO3CSUV.js";import"./chunk-4WFVMWDK.js";import"./chunk-XDPEVTHG.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{g as l}from"./chunk-PM2M367S.js";function Te(n){let t=n,e=Math.floor(Math.abs(n)),o=n.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:a===0&&e!==0&&e%1e6===0&&o===0||!(a>=0&&a<=5)?4:5}var ke=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",Te];var F=class n{constructor(t,e,o,a){this._modalCtrl=t;this._authService=e;this._firestore=o;this._router=a}user;userNameForm=new R({username:new N("")});userEmailForm=new R({email:new N("",q.email)});ionViewWillEnter(){return l(this,null,function*(){this.userNameForm.patchValue({username:this.user?.displayName}),this.userEmailForm.patchValue({email:this.user?.email})})}updateUsername(){return l(this,null,function*(){try{let{username:t}=this.userNameForm.value;yield this._authService.updateUserProfile({displayName:t});let e=ve(this._firestore,"Users",this.user.uid);yield _e(e,{username:t}),console.log("Username updated successfully:",t)}catch(t){console.error("Error updating username:",t)}})}closeModal(){this._modalCtrl.dismiss()}onSignOut(){return l(this,null,function*(){try{yield this._authService.signOut(),this._router.navigate(["/login-homepage"]),this.closeModal()}catch(t){console.error("Error signing out:",t)}})}static \u0275fac=function(e){return new(e||n)(s(D),s(x),s(P),s(C))};static \u0275cmp=g({type:n,selectors:[["app-profile-page"]],inputs:{user:"user"},decls:36,vars:2,consts:[[1,"headerToolbar"],[1,"accountLabel","ion-padding"],["slot","end"],[3,"click"],[1,"avatarContainer","ion-padding"],[1,"ion-justify-content-center","ion-align-items-center"],["size","auto"],["src","./Illustrations/Categories/pets_icon_cat.webp"],[1,"ion-text-center"],[1,"helloTitle"],[1,"usernameTitle"],[1,"ion-padding","usernameContainer"],["sizeXs","12","sizeSm","10"],[3,"formGroup"],["formControlName","username","fill","outline","shape","round",1,"input"],["sizeXs","12"],["expand","block","type","submit",1,"updateUsernameButton",3,"click"]],template:function(e,o){e&1&&(i(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-label",1),m(3,"Compte"),r(),i(4,"ion-buttons",2)(5,"ion-button",3),d("click",function(){return o.closeModal()}),m(6," Close "),r()()()(),i(7,"ion-content")(8,"div",4)(9,"ion-grid")(10,"ion-row",5)(11,"ion-col",6)(12,"ion-avatar"),u(13,"ion-img",7),r()()(),i(14,"ion-row",5)(15,"ion-col",8)(16,"ion-text",9),m(17,"Bonjour"),r()()(),i(18,"ion-row",5)(19,"ion-col",8)(20,"ion-text",10),m(21),r()()()()(),i(22,"div",11)(23,"ion-grid")(24,"ion-row")(25,"ion-col",12)(26,"ion-label"),m(27,"Changer le nom d'utilisateur"),r()()(),i(28,"ion-row")(29,"ion-col",12)(30,"form",13),u(31,"ion-input",14),r()()(),i(32,"ion-row",5)(33,"ion-col",15)(34,"ion-button",16),d("click",function(){return o.updateUsername()}),m(35," Mettre \xE0 jour "),r()()()()()()),e&2&&(c(21),h(o.user.displayName),c(9),p("formGroup",o.userNameForm))},dependencies:[y,k,I,se,ae,ue,Ce,v,S,b,M,_,T,re,oe,ee,te,ie,ne],styles:["ion-toolbar.headerToolbar[_ngcontent-%COMP%]{--background: #e76f51;--color: #264653}ion-content[_ngcontent-%COMP%]{--background: #fcf8ed}ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px}ion-input.input-fill-outline.input-shape-round[_ngcontent-%COMP%]{--border-radius: 10px}ion-input.input[_ngcontent-%COMP%]{--background: #ffffff}ion-button.updateUsernameButton[_ngcontent-%COMP%]{--background: #264653;--color: #fcf8ed;--border-radius: 12px;height:5px;font-size:.8rem}ion-text.usernameTitle[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:800;font-size:1.5rem}ion-text.helloTitle[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:300;font-size:1rem}ion-label.accountLabel[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;font-size:1.2rem}div.avatarContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:25vh}div.accountLabelContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}div.usernameContainer[_ngcontent-%COMP%], div.userEmailContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:25vh}"]})};var Se=(n,t)=>({"task-validated":n,"task-not-validated":t}),$e=(n,t)=>t.uuid;function Oe(n,t){if(n&1){let e=G();i(0,"ion-col",16)(1,"div",17)(2,"ion-card",18),d("click",function(){let a=H(e).$implicit,f=w(2);return z(f.validateTask(a))}),i(3,"ion-card-content",19)(4,"ion-list",20),u(5,"ion-img",21),i(6,"ion-text",22),m(7),r()()()()()()}if(n&2){let e=t.$implicit;c(2),p("ngClass",O(4,Se,e.validated,!e.validated)),c(2),p("ngClass",O(7,Se,e.validated,!e.validated)),c(),J("src",e.icon),c(2),h(e.description)}}function Ee(n,t){if(n&1&&L(0,Oe,8,10,"ion-col",16,$e),n&2){let e=w();U(e.todayTasks)}}var Me=class n{constructor(t,e,o,a,f,Re){this._taskSelectionService=t;this._famillyService=e;this._authService=o;this._router=a;this._firestore=f;this._modalCtrl=Re;Q(ke),this.userObs=this._authService.user$}taskDescription$;taskDescriptions=[];userObs;user;username="";todayTasks=[];selectedDate=new Date;validatedTask=!1;ionViewWillEnter(){return l(this,null,function*(){yield this.getData()})}openProfileModal(){return l(this,null,function*(){yield(yield this._modalCtrl.create({component:F,componentProps:{user:yield j(this.userObs)}})).present()})}updateTasksForSelectedDate(){if(!this.taskDescriptions||this.taskDescriptions.length===0){this.todayTasks=[];return}let t=this.selectedDate.toISOString().split("T")[0];this.todayTasks=this.taskDescriptions.filter(e=>new Date(e.dueDate).toISOString().split("T")[0]===t)}previousDay(){this.selectedDate=new Date(this.selectedDate.getTime()-24*60*60*1e3),this.updateTasksForSelectedDate()}nextDay(){this.selectedDate=new Date(this.selectedDate.getTime()+24*60*60*1e3),this.updateTasksForSelectedDate()}addMemberToFamilly(t){return l(this,null,function*(){try{yield this._famillyService.addMemberToFamillyGroup(t)}catch(e){console.error("Error adding member to family group:",e)}})}goToCalendar(){this._router.navigate(["calendar"])}onSignOut(){return l(this,null,function*(){yield this._authService.signOut(),this._router.navigate(["/login"])})}validateTask(t){return l(this,null,function*(){try{yield this._taskSelectionService.validateTask(t);let e=this.todayTasks.findIndex(o=>o.uuid===t.uuid);e!==-1&&(this.todayTasks[e].validated=!this.todayTasks[e].validated)}catch(e){console.error("Error validating task:",e)}})}goToCategoryPage(){this._router.navigate(["/category"])}getData(){return l(this,null,function*(){try{let t=yield this._authService.getUserData();t&&(this.username=t.username),this.taskDescriptions=yield this._taskSelectionService.getTasksFromFamillyGroup(),this.updateTasksForSelectedDate()}catch(t){console.error("Error fetching tasks on page load:",t)}})}handleRefresh(t){setTimeout(()=>{this.getData(),t.target.complete()},2e3)}static \u0275fac=function(e){return new(e||n)(s(be),s(ye),s(x),s(C),s(P),s(D))};static \u0275cmp=g({type:n,selectors:[["app-chore-homepage"]],decls:31,vars:10,consts:[[1,"ion-padding"],[1,"ion-justify-content-center","ion-align-items-center"],[1,"salutationTextCol"],[1,"avatarCol"],[1,"avatarIcon",3,"click"],["src","https://ionicframework.com/docs/img/demos/avatar.svg"],["slot","fixed",3,"ionRefresh"],["size","auto"],["name","chevron-back-circle-outline","size","large",1,"chevronIcon",3,"click"],["size","8"],[1,"ion-text-center"],[1,"fullDateText"],["name","chevron-forward-circle-outline","size","large",1,"chevronIcon",3,"click"],["vertical","bottom","horizontal","end"],[3,"click"],["name","add"],["sizeXs","6","sizeSm","6","sizeMd","6","sizeLg","3"],[1,"todayTaskCardContainer"],[3,"click","ngClass"],[1,"taskCard"],[1,"taskCardList",3,"ngClass"],[1,"taskIcon",3,"src"],[1,"taskTitle"]],template:function(e,o){if(e&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-grid",0)(3,"ion-row",1)(4,"ion-col",2)(5,"ion-text"),m(6),E(7,"async"),r()(),i(8,"ion-col",3)(9,"ion-avatar",4),d("click",function(){return o.openProfileModal()}),u(10,"ion-img",5),r()()()()()(),i(11,"ion-content")(12,"ion-refresher",6),d("ionRefresh",function(f){return o.handleRefresh(f)}),u(13,"ion-refresher-content"),r(),i(14,"ion-grid",0)(15,"ion-row",1)(16,"ion-col",7)(17,"ion-icon",8),d("click",function(){return o.previousDay()}),r()(),i(18,"ion-col",9)(19,"ion-text",10)(20,"p",11),m(21),E(22,"date"),r()()(),i(23,"ion-col",7)(24,"ion-icon",12),d("click",function(){return o.nextDay()}),r()()(),i(25,"ion-row"),B(26,Ee,2,0),r(),i(27,"ion-row")(28,"ion-fab",13)(29,"ion-fab-button",14),d("click",function(){return o.goToCategoryPage()}),u(30,"ion-icon",15),r()()()()()),e&2){let a;c(6),$("Salutation ",(a=V(7,3,o.userObs))==null?null:a.displayName,"!"),c(15),$(" ",W(22,5,o.selectedDate,"fullDate","","fr-FR")," "),c(5),A(o.todayTasks.length>0?26:-1)}},dependencies:[Z,X,Y,K,y,b,M,_,T,me,de,he,le,ce,v,S,k,I,pe,fe,ge],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #e76f51}ion-content[_ngcontent-%COMP%]{--background: #fcf8ed}ion-col.avatarCol[_ngcontent-%COMP%]{display:flex;justify-content:end}ion-col.salutationTextCol[_ngcontent-%COMP%]{display:flex;justify-content:start}ion-icon.chevronIcon[_ngcontent-%COMP%]{color:#264653}ion-fab[_ngcontent-%COMP%]{margin-bottom:var(--ion-safe-area-bottom, 0)}ion-avatar.avatarIcon[_ngcontent-%COMP%]{width:35px;height:35px}ion-list.taskCardList[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-text.taskTitle[_ngcontent-%COMP%]{color:#fcf8ed}ion-card[_ngcontent-%COMP%]{width:150px;height:150px;display:flex;border-radius:20px;--background: #9d2a2a}.task-validated[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.task-not-validated[_ngcontent-%COMP%]{background-color:#9d2a2a;color:#fff}ion-card-content.taskCard[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400;font-family:Roboto,sans-serif;width:150px;height:150px;display:flex;justify-content:center;align-items:center;text-align:center}div.todayTaskCardContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}p.fullDateText[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:500;font-size:1.1rem}"]})};export{Me as ChoreHomepageComponent};
