import{a as N}from"./chunk-WJDDQXF5.js";import{a as G,d as m}from"./chunk-JOGVLLNH.js";import{Bb as A,G as t,H as d,Ha as _,I as h,K as I,Ka as f,La as P,Ma as S,N as l,Na as a,O as w,Oa as c,R as o,Ra as b,S as i,Sa as M,T as s,Ua as F,W as C,X as v,Za as x,bb as E,cb as R,ea as g,ga as y,hb as O,jb as z,ob as k}from"./chunk-SPIVRC24.js";import"./chunk-SRKNPOHE.js";import"./chunk-7KGURMOZ.js";import"./chunk-BLW5R4XS.js";import"./chunk-XPWJSSAW.js";import"./chunk-WNRD3PDI.js";import"./chunk-QQJWOYZO.js";import"./chunk-MHO3CSUV.js";import"./chunk-4WFVMWDK.js";import"./chunk-XDPEVTHG.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{g as u}from"./chunk-PM2M367S.js";function D(r,e){if(r&1&&(o(0,"ion-col",9),g(1),i()),r&2){let n=v();t(),y(" ",n.errorMessage," ")}}var j=class r{constructor(e,n){this._authService=e;this._route=n}signInForm=new a({});passwordResetForm=new a({});user=null;errorMessage=null;ngOnInit(){this.createSignInForm(),this.createPasswordResetForm()}createSignInForm(){this.signInForm=new a({email:new c(""),password:new c("")})}createPasswordResetForm(){this.passwordResetForm=new a({email:new c("",f.compose([f.email]))})}onSignIn(){return u(this,null,function*(){this.errorMessage=null;try{let{email:e,password:n}=this.signInForm.value;if(this.user=yield this._authService.signIn(e,n),!this.user)throw new Error("User is null or undefined after sign in.");console.log("User signed in successfully:",this.user.email),this.signInForm.reset(),this._route.navigate(["/chore-menu-homepage/chore-homepage"])}catch(e){if(e instanceof G)switch(console.error("Firebase error code:",e.code),e.code){case m.INVALID_PASSWORD:this.errorMessage="Wrong password. Please try again.";break;case m.INVALID_EMAIL:this.errorMessage="Invalid email. Please try again.";break;case m.CREDENTIAL_MISMATCH:this.errorMessage="Your credentials do not match. Please check your email and password.";break;default:this.errorMessage="An unexpected error occurred. Please try again."}else this.errorMessage="An error occurred. Please try again."}})}onPasswordReset(){return u(this,null,function*(){try{let{email:e}=this.passwordResetForm.value;if(!e)throw new Error("Email is required for password reset.");yield this._authService.sendPasswordResetEmail(e),console.log("Password reset email sent successfully to:",e),this.passwordResetForm.reset()}catch(e){console.error("Error sending password reset email:",e)}})}static \u0275fac=function(n){return new(n||r)(d(N),d(_))};static \u0275cmp=h({type:r,selectors:[["app-sign-in-page"]],decls:26,vars:4,consts:[[1,"topContainer","ion-padding"],[1,"loginHomepageGrid","ion-no-padding"],[1,"ion-justify-content-center","ion-align-items-center"],["sizeLg","5"],["src","./Illustrations/Clouds/sky_clouds.webp"],[1,"emailInputContainer","ion-padding",3,"formGroup"],["sizeXs","12","sizeLg","5"],["fill","outline","shape","round","type","email","id","signInEmail","formControlName","email","placeholder","Email",1,"input","ion-padding",3,"clearInput"],["fill","outline","shape","round","type","password","id","signUpPassword","formControlName","password","placeholder","Mot de passe",1,"input","ion-padding",3,"clearInput"],["sizeXs","12","sizeLg","5",1,"error-message"],["size","auto",1,"ion-text-center"],["expand","block",3,"click"],[1,"bottomContainer","ion-padding"],[1,"illustrationHouseGrid","ion-no-padding"],[1,"ion-justify-content-center","ion-align-items-center","illustrationRow"],["sizeXs","5","sizeSm","5","sizeMd","5","sizeLg","5","sizeXl","5",1,"illustrationCol"],["src","./Illustrations/House/house.webp","alt","house_illustration",1,"houseIllustration"]],template:function(n,p){n&1&&(o(0,"ion-content")(1,"div")(2,"div",0)(3,"ion-grid",1)(4,"ion-row",2)(5,"ion-col",3),s(6,"ion-img",4),i()()()(),o(7,"div",5)(8,"ion-grid")(9,"ion-row")(10,"ion-col",6),s(11,"ion-input",7),i()(),o(12,"ion-row")(13,"ion-col",6),s(14,"ion-input",8),i()(),o(15,"ion-row"),I(16,D,2,1,"ion-col",9),i(),o(17,"ion-row",2)(18,"ion-col",10)(19,"ion-button",11),C("click",function(){return p.onSignIn()}),g(20,"Se connecter "),i()()()()(),o(21,"div",12)(22,"ion-grid",13)(23,"ion-row",14)(24,"ion-col",15),s(25,"ion-img",16),i()()()()()()),n&2&&(t(7),l("formGroup",p.signInForm),t(4),l("clearInput",!0),t(3),l("clearInput",!0),t(2),w(p.errorMessage?16:-1))},dependencies:[F,P,S,b,M,R,O,k,E,z,x,A],styles:["ion-content[_ngcontent-%COMP%]{--background: #fcf8ed}ion-grid.illustrationHouseGrid[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end}ion-col.illustrationCol[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-col.error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;margin-top:5px}ion-img.houseIllustration[_ngcontent-%COMP%]{width:auto;height:auto}ion-input.input-fill-outline.input-shape-round[_ngcontent-%COMP%]{--border-radius: 10px}ion-input.input[_ngcontent-%COMP%]{--background: #ffffff;--color: #264653}ion-button[_ngcontent-%COMP%]{--background: #264653;--color: #fcf8ed;--border-radius: 12px;width:182px;height:58.9px;font-size:.8rem}div.topContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;height:33vh}div.emailInputContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:33vh}div.bottomContainer[_ngcontent-%COMP%]{display:flex;height:33vh}"]})};export{j as SignInPageComponent};
