import{a as Ie}from"./chunk-3KVAIWYK.js";import{a as E}from"./chunk-WVY745H3.js";import{a as O}from"./chunk-WJDDQXF5.js";import{B as Se,e as ye,r as F,v as ke}from"./chunk-JOGVLLNH.js";import{$a as de,A as g,Aa as q,Ab as ve,Ba as ee,Bb as be,Ca as te,G as d,H as s,Ha as b,I as C,K as L,Ka as ie,La as oe,Ma as ne,N as h,Na as z,O as V,Oa as A,P as G,Q as J,Qa as re,R as i,Ra as ae,S as n,Sa as se,T as p,Ua as le,V as _,W as c,X as R,Ya as y,Za as ce,_ as W,_a as me,ab as ue,bb as k,cb as S,da as X,db as pe,ea as l,eb as fe,fa as v,ga as j,hb as I,i as U,ib as M,jb as T,kb as ge,la as N,lb as he,ma as H,mb as Ce,na as Y,nb as _e,oa as K,ob as P,sb as D,ua as Z,vb as w,xb as x,z as f,za as Q}from"./chunk-SPIVRC24.js";import"./chunk-SRKNPOHE.js";import"./chunk-7KGURMOZ.js";import"./chunk-BLW5R4XS.js";import"./chunk-XPWJSSAW.js";import"./chunk-WNRD3PDI.js";import"./chunk-QQJWOYZO.js";import"./chunk-MHO3CSUV.js";import"./chunk-4WFVMWDK.js";import"./chunk-XDPEVTHG.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{g as m}from"./chunk-PM2M367S.js";function De(a){let t=a,e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(a.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:r===0&&e!==0&&e%1e6===0&&o===0||!(r>=0&&r<=5)?4:5}var Me=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",De];var $=class a{constructor(t,e,o,r,u){this._modalCtrl=t;this._authService=e;this._firestore=o;this._router=r;this._famillyService=u}user;userNameForm=new z({username:new A("")});userEmailForm=new z({email:new A("",ie.email)});ionViewWillEnter(){return m(this,null,function*(){this.userNameForm.patchValue({username:this.user?.displayName}),this.userEmailForm.patchValue({email:this.user?.email})})}updateUsername(){return m(this,null,function*(){try{let{username:t}=this.userNameForm.value;yield this._authService.updateUserProfile({displayName:t});let e=ke(this._firestore,"Users",this.user.uid);yield Se(e,{username:t}),console.log("Username updated successfully:",t)}catch(t){console.error("Error updating username:",t)}})}addMemberToFamilly(t){return m(this,null,function*(){try{let e=t.value;e&&(yield this._famillyService.addMemberToFamillyGroup(e))}catch(e){console.error("Error adding member to family group:",e)}})}closeModal(){this._modalCtrl.dismiss()}onSignOut(){return m(this,null,function*(){try{yield this._authService.signOut(),this._router.navigate(["/login-homepage"]),this.closeModal()}catch(t){console.error("Error signing out:",t)}})}static \u0275fac=function(e){return new(e||a)(s(x),s(O),s(F),s(b),s(E))};static \u0275cmp=C({type:a,selectors:[["app-profile-page"]],inputs:{user:"user"},decls:56,vars:2,consts:[["memberId",""],[1,"headerToolbar"],[1,"accountLabel","ion-padding"],["slot","end"],[3,"click"],[1,"avatarContainer","ion-padding"],[1,"ion-justify-content-center","ion-align-items-center"],["size","auto"],["src","./Illustrations/Categories/pets_icon_cat.webp"],[1,"ion-text-center"],[1,"helloTitle"],[1,"usernameTitle"],[1,"ion-padding","usernameContainer"],["sizeXs","12","sizeSm","10"],[3,"formGroup"],["formControlName","username","fill","outline","shape","round",1,"input"],["sizeXs","12"],["expand","block","type","submit",1,"updateUsernameButton",3,"click"],[1,"ion-padding"],["type","text","placeholder","Email","fill","outline","shape","round",1,"input"],["expand","block",1,"updateUsernameButton",3,"click"]],template:function(e,o){if(e&1){let r=_();i(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-label",2),l(3,"Compte"),n(),i(4,"ion-buttons",3)(5,"ion-button",4),c("click",function(){return f(r),g(o.closeModal())}),l(6," Close "),n()()()(),i(7,"ion-content")(8,"div",5)(9,"ion-grid")(10,"ion-row",6)(11,"ion-col",7)(12,"ion-avatar"),p(13,"ion-img",8),n()()(),i(14,"ion-row",6)(15,"ion-col",9)(16,"ion-text",10),l(17,"Bonjour"),n()()(),i(18,"ion-row",6)(19,"ion-col",9)(20,"ion-text",11),l(21),n()()()()(),i(22,"div",12)(23,"ion-grid")(24,"ion-row")(25,"ion-col",13)(26,"ion-label"),l(27,"Changer le nom d'utilisateur"),n()()(),i(28,"ion-row")(29,"ion-col",13)(30,"form",14),p(31,"ion-input",15),n()()(),i(32,"ion-row",6)(33,"ion-col",16)(34,"ion-button",17),c("click",function(){return f(r),g(o.updateUsername())}),l(35," Mettre \xE0 jour "),n()()()()(),i(36,"div",18)(37,"ion-grid")(38,"ion-row")(39,"ion-col")(40,"ion-label"),l(41,"Ajouter un nouveau membre"),n()()(),i(42,"ion-row")(43,"ion-col",13),p(44,"ion-input",19,0),n()(),i(46,"ion-row")(47,"ion-col")(48,"ion-button",20),c("click",function(){f(r);let B=X(45);return g(o.addMemberToFamilly(B))}),l(49,"Ajouter Membre "),n()()()()(),i(50,"div")(51,"ion-grid")(52,"ion-row")(53,"ion-col")(54,"ion-button",20),c("click",function(){return f(r),g(o.onSignOut())}),l(55,"Se d\xE9connecter"),n()()()()()()}e&2&&(d(21),v(o.user.displayName),d(9),h("formGroup",o.userNameForm))},dependencies:[S,M,w,me,ce,ge,be,y,T,I,P,k,D,le,re,oe,ne,ae,se],styles:["ion-toolbar.headerToolbar[_ngcontent-%COMP%]{--background: #e76f51;--color: #264653}ion-content[_ngcontent-%COMP%]{--background: #fcf8ed}ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px}ion-input.input-fill-outline.input-shape-round[_ngcontent-%COMP%]{--border-radius: 10px}ion-input.input[_ngcontent-%COMP%]{--background: #ffffff}ion-button.updateUsernameButton[_ngcontent-%COMP%]{--background: #264653;--color: #fcf8ed;--border-radius: 12px;height:5px;font-size:.8rem}ion-text.usernameTitle[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:800;font-size:1.5rem}ion-text.helloTitle[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:300;font-size:1rem}ion-label.accountLabel[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;font-size:1.2rem}div.avatarContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:25vh}div.accountLabelContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}div.usernameContainer[_ngcontent-%COMP%], div.userEmailContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:25vh}"]})};var Te=(a,t)=>({"task-validated":a,"task-not-validated":t}),je=(a,t)=>t.uuid;function Ne(a,t){if(a&1){let e=_();i(0,"ion-col",17)(1,"div",18)(2,"ion-card",19),c("click",function(){let r=f(e).$implicit,u=R(2);return g(u.validateTask(r))}),i(3,"ion-card-content",20)(4,"ion-list",21),p(5,"ion-img",22),i(6,"ion-text",23),l(7),n()()()()()()}if(a&2){let e=t.$implicit;d(2),h("ngClass",N(4,Te,e.validated,!e.validated)),d(2),h("ngClass",N(7,Te,e.validated,!e.validated)),d(),W("src",e.icon),d(2),v(e.description)}}function He(a,t){if(a&1&&G(0,Ne,8,10,"ion-col",17,je),a&2){let e=R();J(e.todayTasks)}}var Pe=class a{constructor(t,e,o,r,u,B,ze){this._taskSelectionService=t;this._famillyService=e;this._authService=o;this._router=r;this._firestore=u;this._modalCtrl=B;this._auth=ze;te(Me),this.userObs=this._authService.user$}taskDescription$;taskDescriptions=[];userObs;username="";todayTasks=[];selectedDate=new Date;validatedTask=!1;ionViewWillEnter(){return m(this,null,function*(){let t=this._auth.currentUser;console.log("User:",t),yield this.getData()})}openProfileModal(){return m(this,null,function*(){yield(yield this._modalCtrl.create({component:$,componentProps:{user:yield U(this.userObs)}})).present()})}updateTasksForSelectedDate(){if(!this.taskDescriptions||this.taskDescriptions.length===0){this.todayTasks=[];return}let t=this.selectedDate.toISOString().split("T")[0];this.todayTasks=this.taskDescriptions.filter(e=>new Date(e.dueDate).toISOString().split("T")[0]===t)}previousDay(){this.selectedDate=new Date(this.selectedDate.getTime()-24*60*60*1e3),this.updateTasksForSelectedDate()}nextDay(){this.selectedDate=new Date(this.selectedDate.getTime()+24*60*60*1e3),this.updateTasksForSelectedDate()}goToCalendar(){this._router.navigate(["calendar"])}onSignOut(){return m(this,null,function*(){yield this._authService.signOut(),this._router.navigate(["/login"])})}validateTask(t){return m(this,null,function*(){try{yield this._taskSelectionService.validateTask(t);let e=this.todayTasks.findIndex(o=>o.uuid===t.uuid);e!==-1&&(this.todayTasks[e].validated=!this.todayTasks[e].validated)}catch(e){console.error("Error validating task:",e)}})}goToCategoryPage(){this._router.navigate(["/category"])}getData(){return m(this,null,function*(){try{let t=yield this._authService.getUserData();t&&(this.username=t.username),this.taskDescriptions=yield this._taskSelectionService.getTasksFromFamillyGroup(),this.updateTasksForSelectedDate()}catch(t){console.error("Error fetching tasks on page load:",t)}})}handleRefresh(t){setTimeout(()=>{this.getData(),t.target.complete()},2e3)}static \u0275fac=function(e){return new(e||a)(s(Ie),s(E),s(O),s(b),s(F),s(x),s(ye))};static \u0275cmp=C({type:a,selectors:[["app-chore-homepage"]],decls:31,vars:10,consts:[[1,"ion-safe-area-top"],[1,"ion-padding"],[1,"ion-justify-content-center","ion-align-items-center"],[1,"salutationTextCol"],[1,"avatarCol"],[1,"avatarIcon",3,"click"],["src","https://ionicframework.com/docs/img/demos/avatar.svg"],["slot","fixed",3,"ionRefresh"],["size","auto"],["name","chevron-back-circle-outline","size","large",1,"chevronIcon",3,"click"],["size","8"],[1,"ion-text-center"],[1,"fullDateText"],["name","chevron-forward-circle-outline","size","large",1,"chevronIcon",3,"click"],["vertical","bottom","horizontal","end"],[1,"addCatFab",3,"click"],["name","add"],["sizeXs","6","sizeSm","6","sizeMd","6","sizeLg","3"],[1,"todayTaskCardContainer"],[3,"click","ngClass"],[1,"taskCard"],[1,"taskCardList",3,"ngClass"],[1,"taskIcon",3,"src"],[1,"taskTitle"]],template:function(e,o){if(e&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-grid",1)(3,"ion-row",2)(4,"ion-col",3)(5,"ion-text"),l(6),H(7,"async"),n()(),i(8,"ion-col",4)(9,"ion-avatar",5),c("click",function(){return o.openProfileModal()}),p(10,"ion-img",6),n()()()()()(),i(11,"ion-content")(12,"ion-refresher",7),c("ionRefresh",function(u){return o.handleRefresh(u)}),p(13,"ion-refresher-content"),n(),i(14,"ion-grid",1)(15,"ion-row",2)(16,"ion-col",8)(17,"ion-icon",9),c("click",function(){return o.previousDay()}),n()(),i(18,"ion-col",10)(19,"ion-text",11)(20,"p",12),l(21),H(22,"date"),n()()(),i(23,"ion-col",8)(24,"ion-icon",13),c("click",function(){return o.nextDay()}),n()()(),i(25,"ion-row",2),L(26,He,2,0),n(),i(27,"ion-row")(28,"ion-fab",14)(29,"ion-fab-button",15),c("click",function(){return o.goToCategoryPage()}),p(30,"ion-icon",16),n()()()()()),e&2){let r;d(6),j("Salutation ",(r=Y(7,3,o.userObs))==null?null:r.displayName,"!"),d(15),j(" ",K(22,5,o.selectedDate,"fullDate","","fr-FR")," "),d(5),V(o.todayTasks.length>0?26:-1)}},dependencies:[ee,Z,Q,q,S,I,P,k,D,pe,fe,ve,de,ue,y,T,M,w,he,Ce,_e],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #e76f51}ion-content[_ngcontent-%COMP%]{--background: #fcf8ed}ion-col.avatarCol[_ngcontent-%COMP%]{display:flex;justify-content:end}ion-col.salutationTextCol[_ngcontent-%COMP%]{display:flex;justify-content:start}ion-icon.chevronIcon[_ngcontent-%COMP%]{color:#264653}ion-fab[_ngcontent-%COMP%]{--ion-safe-area-bottom: 0}ion-avatar.avatarIcon[_ngcontent-%COMP%]{width:35px;height:35px}ion-list.taskCardList[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-text.taskTitle[_ngcontent-%COMP%]{color:#fcf8ed;font-family:Roboto,sans-serif;font-weight:300;font-size:.8rem}ion-card[_ngcontent-%COMP%]{width:150px;height:150px;display:flex;border-radius:20px;--background: #9d2a2a}.task-validated[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.task-not-validated[_ngcontent-%COMP%]{background-color:#9d2a2a;color:#fff}ion-img.taskIcon[_ngcontent-%COMP%]{width:60px;height:60px}ion-card-content.taskCard[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400;font-family:Roboto,sans-serif;width:150px;height:150px;display:flex;justify-content:center;align-items:center;text-align:center}ion-fab-button.addCatFab[_ngcontent-%COMP%]{--background: #264653}div.todayTaskCardContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}p.fullDateText[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:500;font-size:1.1rem}"]})};export{Pe as ChoreHomepageComponent};
