import{a as u,d as i,e as h,g as d,h as m,j as a,k as f,l as p,m as w,n as b,o as g,r as E,v as y,w as U}from"./chunk-JEBJIWP7.js";import{c,u as l,x as n}from"./chunk-TPGHJTJC.js";import{g as s}from"./chunk-PM2M367S.js";var _=class o{constructor(r,t){this._auth=r;this._firestore=t;this.user$=d(this._auth)}user;username;_user$=new c(null);user$;signUp(r,t){return s(this,null,function*(){try{let e=yield m(this._auth,r,t);return this.user=e.user,this.user&&(yield a(this.user),console.log("Verification email sent to:",this.user.email)),this._user$.next(this.user),this.user}catch(e){if(e instanceof u)switch(e.code){case i.EMAIL_EXISTS:console.error("Email exists already in the system.");break;case i.INVALID_PASSWORD:console.error("Invalid password. Please provide a valid password.");break;default:console.error("An unexpected error occurred:",e.message)}throw e}})}resendVerificationEmail(){return s(this,null,function*(){if(this.user)yield a(this.user),console.log("Verification email resent to:",this.user.email);else throw new Error("No authenticated user to resend verification email.")})}isEmailVerified(){return s(this,null,function*(){if(this.user)return yield this.user.reload(),this.user.emailVerified||!1;throw new Error("No authenticated user to check email verification status.")})}signIn(r,t){return s(this,null,function*(){try{let e=yield p(this._auth,r,t);return this.user=e.user,this._user$.next(this.user),this.user}catch(e){if(e instanceof u)switch(e.code){case i.INVALID_PASSWORD:console.error("Password is invalid. Please check your password.");break;case i.INVALID_EMAIL:console.error("Email is invalid. Please check your email");break;case i.CREDENTIAL_MISMATCH:console.error("Your credentials do not match. Please check your email and password.");break;default:console.error("An unexpected error occurred:",e.message)}throw e}})}sendEmailVerification(){return s(this,null,function*(){if(this.user)yield a(this.user),console.log("Verification email sent to:",this.user.email);else throw new Error("No authenticated user to send verification email.")})}signOut(){return s(this,null,function*(){yield w(this._auth),this.user=null,this._user$.next(this.user),console.log("User signed out successfully")})}sendPasswordResetEmail(r){return f(this._auth,r)}updateUserProfile(r){return s(this,null,function*(){if(this._auth.currentUser)yield g(this._auth.currentUser,r);else throw new Error("No authenticated user to update profile.")})}updateUserEmail(r){return s(this,null,function*(){if(this._auth.currentUser)yield b(this._auth.currentUser,r);else throw new Error("No authenticated user to update email.")})}getUserData(){return s(this,null,function*(){let r=this._auth.currentUser;if(!r)return null;let t=y(this._firestore,"Users",r.uid),e=yield U(t);return e.exists()?e.data():(console.error("User document does not exist in Firestore"),null)})}static \u0275fac=function(t){return new(t||o)(n(h),n(E))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{_ as a};
